$(function(){function e(){t.css({top:a.offset().top+a.outerHeight(),left:a.offset().left,width:a.outerWidth()})}var t=$($("#livesearch").length?"#livesearch":"<ul id='livesearch'></ul>"),a=$("#header [name=search]");$(window).resize(function(){e()}),a.keyup(function(i){switch(i.keyCode){case 13:return $(".active",t).length&&(window.location=$(".active a",t).attr("href")),!1;case 40:return $(".active",t).length?$(".active",t).removeClass("active").next().addClass("active"):$("li:first",t).addClass("active"),!1;case 38:return $(".active",t).length?$(".active",t).removeClass("active").prev().addClass("active"):$("li:last",t).addClass("active"),!1;default:var c=a.val();c.length>2?$.getJSON("index.php?route=product/search/livesearch&search="+c,function(a){t.empty(),$.each(a,function(e,a){t.append("<li><a href='"+a.href+"' "+a.class+"><img src='"+a.img+"' alt='"+a.name+"'><span>"+a.name+(a.model?"<small>"+a.model+"</small>":"")+"</span><em>"+(a.price?a.price:"")+"</em></a></li>")}),t.remove(),$("body").prepend(t),e()}):t.empty()}}).blur(function(){setTimeout(function(){t.hide()},500)}).focus(function(){e(),t.show()})});