!function(e){"use strict";var t,o=function(e,t){void 0===t&&(t={}),this.init(e,t)},i=o.prototype,a=["canvas","vml"],s=["oval","spiral","square","rect","roundRect"],n=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,r=-1!==navigator.appVersion.indexOf("MSIE")&&8===parseFloat(navigator.appVersion.split("MSIE")[1]),l=!!document.createElement("canvas").getContext,d=!0,c=function(e,t,o){var i,a=document.createElement(e);for(i in o)a[i]=o[i];return void 0!==t&&t.appendChild(a),a},m=function(e,t){for(var o in t)e.style[o]=t[o];return e},h=function(e,t){for(var o in t)e.setAttribute(o,t[o]);return e},u=function(e,t,o,i){e.save(),e.translate(t,o),e.rotate(i),e.translate(-t,-o),e.beginPath()};i.init=function(e,i){"boolean"==typeof i.safeVML&&(d=i.safeVML);try{this.mum="undefined"!==e?e:document.body}catch(e){this.mum=document.body}if(this.cont=c("div",this.mum,{className:this.classCanvasLoader}),l)t=a[0],this.can=c("canvas",this.cont),this.con=this.can.getContext("2d"),this.cCan=m(c("canvas",this.cont),{display:"none"}),this.cCon=this.cCan.getContext("2d");else{if(t=a[1],void 0===o.vmlSheet){document.getElementsByTagName("head")[0].appendChild(c("style")),o.vmlSheet=document.styleSheets[document.styleSheets.length-1];for(var s=["group","oval","roundrect","fill"],n=0;n<s.length;++n)o.vmlSheet.addRule(s[n],"behavior:url(#default#VML); position:absolute;")}this.vml=c("group",this.cont)}this.setColor(this.color),this.draw(),m(this.cont,{display:"none"})},i.classCanvasLoader="canvasLoader",i.cont={},i.can={},i.con={},i.cCan={},i.cCon={},i.timer={},i.activeId=0,i.diameter=40,i.setDiameter=function(e){this.diameter=Math.round(Math.abs(e)),this.redraw()},i.getDiameter=function(){return this.diameter},i.cRGB={},i.color="#000000",i.setColor=function(e){this.color=n.test(e)?e:"#000000",this.cRGB=this.getRGB(this.color),this.redraw()},i.getColor=function(){return this.color},i.shape=s[0],i.setShape=function(e){var t;for(t in s)if(e===s[t]){this.shape=e,this.redraw();break}},i.getShape=function(){return this.shape},i.density=40,i.setDensity=function(e){this.density=d&&t===a[1]?Math.round(Math.abs(e))<=40?Math.round(Math.abs(e)):40:Math.round(Math.abs(e)),this.density>360&&(this.density=360),this.activeId=0,this.redraw()},i.getDensity=function(){return this.density},i.range=1.3,i.setRange=function(e){this.range=Math.abs(e),this.redraw()},i.getRange=function(){return this.range},i.speed=2,i.setSpeed=function(e){this.speed=Math.round(Math.abs(e))},i.getSpeed=function(){return this.speed},i.fps=24,i.setFPS=function(e){this.fps=Math.round(Math.abs(e)),this.reset()},i.getFPS=function(){return this.fps},i.getRGB=function(e){return e="#"===e.charAt(0)?e.substring(1,7):e,{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}},i.draw=function(){var e,o,i,n,l,d,f,p,g,v,w,b,y=0,S=this.density,x=Math.round(S*this.range),I=1e3,C=0,O=this.cCon,j=this.diameter,R=.47;if(t===a[0])for(O.clearRect(0,0,I,I),h(this.can,{width:j,height:j}),h(this.cCan,{width:j,height:j});y<S;){switch(g=y<=x?1-1/x*y:g=0,f=(d=270-360/S*y)/180*Math.PI,O.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+g.toString()+")",this.shape){case s[0]:case s[1]:e=.07*j,n=j*R+Math.cos(f)*(j*R-e)-j*R,l=j*R+Math.sin(f)*(j*R-e)-j*R,O.beginPath(),this.shape===s[1]?O.arc(.5*j+n,.5*j+l,e*g,0,2*Math.PI,!1):O.arc(.5*j+n,.5*j+l,e,0,2*Math.PI,!1);break;case s[2]:e=.12*j,n=Math.cos(f)*(j*R-e)+.5*j,l=Math.sin(f)*(j*R-e)+.5*j,u(O,n,l,f),O.fillRect(n,l-.5*e,e,e);break;case s[3]:case s[4]:i=.27*(o=.3*j),n=Math.cos(f)*(i+.13*(j-i))+.5*j,l=Math.sin(f)*(i+.13*(j-i))+.5*j,u(O,n,l,f),this.shape===s[3]?O.fillRect(n,l-.5*i,o,i):(p=.55*i,O.moveTo(n+p,l-.5*i),O.lineTo(n+o-p,l-.5*i),O.quadraticCurveTo(n+o,l-.5*i,n+o,l-.5*i+p),O.lineTo(n+o,l-.5*i+i-p),O.quadraticCurveTo(n+o,l-.5*i+i,n+o-p,l-.5*i+i),O.lineTo(n+p,l-.5*i+i),O.quadraticCurveTo(n,l-.5*i+i,n,l-.5*i+i-p),O.lineTo(n,l-.5*i+p),O.quadraticCurveTo(n,l-.5*i,n+p,l-.5*i))}O.closePath(),O.fill(),O.restore(),++y}else{switch(m(this.cont,{width:j,height:j}),m(this.vml,{width:j,height:j}),this.shape){case s[0]:case s[1]:b="oval",e=140;break;case s[2]:b="roundrect",e=120;break;case s[3]:case s[4]:b="roundrect",e=300}for(o=i=e,n=500-i,l=.5*-i;y<S;){switch(g=y<=x?1-1/x*y:g=0,d=270-360/S*y,this.shape){case s[1]:o=i=e*g,n=500-.5*e-e*g*.5,l=.5*(e-e*g);break;case s[0]:case s[2]:r&&(l=0,this.shape===s[2]&&(n=500-.5*i));break;case s[3]:case s[4]:i=.28*(o=.95*e),r?(n=0,l=500-.5*i):(n=500-o,l=.5*-i),C=this.shape===s[4]?.6:0}w=h(m(c("group",this.vml),{width:I,height:I,rotation:d}),{coordsize:I+","+I,coordorigin:"-500,-500"}),v=m(c(b,w,{stroked:!1,arcSize:C}),{width:o,height:i,top:l,left:n}),c("fill",v,{color:this.color,opacity:g}),++y}}this.tick(!0)},i.clean=function(){if(t===a[0])this.con.clearRect(0,0,1e3,1e3);else{var e=this.vml;if(e.hasChildNodes())for(;e.childNodes.length>=1;)e.removeChild(e.firstChild)}},i.redraw=function(){this.clean(),this.draw()},i.reset=function(){"number"==typeof this.timer&&(this.hide(),this.show())},i.tick=function(e){var o=this.con,i=this.diameter;e||(this.activeId+=360/this.density*this.speed),t===a[0]?(o.clearRect(0,0,i,i),u(o,.5*i,.5*i,this.activeId/180*Math.PI),o.drawImage(this.cCan,0,0,i,i),o.restore()):(this.activeId>=360&&(this.activeId-=360),m(this.vml,{rotation:this.activeId}))},i.show=function(){if("number"!=typeof this.timer){var e=this;this.timer=self.setInterval(function(){e.tick()},Math.round(1e3/this.fps)),m(this.cont,{display:"block"})}},i.hide=function(){"number"==typeof this.timer&&(clearInterval(this.timer),delete this.timer,m(this.cont,{display:"none"}))},i.kill=function(){var e,o=this.cont;for(e in"number"==typeof this.timer&&this.hide(),t===a[0]?(o.removeChild(this.can),o.removeChild(this.cCan)):o.removeChild(this.vml),this)delete this[e]},e.CanvasLoader=o}(window),function(e){function t(e){return void 0!==e}function o(t,o,i){var a=function(){};a.prototype=o.prototype,t.prototype=new a,t.prototype.constructor=t,o.prototype.constructor=o,t._super=o.prototype,i&&e.extend(t.prototype,i)}var i=[["",""],["exit","cancel"],["screen","Screen"]],a=["","o","ms","moz","webkit","webkitCurrent"];function s(e,o){var s;"string"==typeof e&&(o=e,e=document);for(var n=0;n<i.length;++n){o=o.replace(i[n][0],i[n][1]);for(var r=0;r<a.length;++r)if(s=a[r],t(e[s+=0===r?o:o.charAt(0).toUpperCase()+o.substr(1)]))return e[s]}}var n=navigator.userAgent,r=s("fullscreenEnabled"),l=!(-1!==n.indexOf("Android")&&-1!==n.indexOf("Chrome"))&&t(s("fullscreenElement"))&&(!t(r)||!0===r),d=e.fn.jquery.split("."),c=parseInt(d[0])<2&&parseInt(d[1])<7,m=function(){this.__options=null,this._fullScreenElement=null,this.__savedStyles={}};m.prototype={_DEFAULT_OPTIONS:{styles:{boxSizing:"border-box",MozBoxSizing:"border-box",WebkitBoxSizing:"border-box"},toggleClass:null},__documentOverflow:"",__htmlOverflow:"",_preventDocumentScroll:function(){this.__documentOverflow=e("body")[0].style.overflow,this.__htmlOverflow=e("html")[0].style.overflow,e("body, html").css("overflow","hidden")},_allowDocumentScroll:function(){e("body")[0].style.overflow=this.__documentOverflow,e("html")[0].style.overflow=this.__htmlOverflow},_fullScreenChange:function(){this.isFullScreen()?(this._preventDocumentScroll(),this._triggerEvents()):(this._allowDocumentScroll(),this._revertStyles(),this._triggerEvents(),this._fullScreenElement=null)},_fullScreenError:function(t){this._revertStyles(),this._fullScreenElement=null,t&&e(document).trigger("fscreenerror",[t])},_triggerEvents:function(){e(this._fullScreenElement).trigger(this.isFullScreen()?"fscreenopen":"fscreenclose"),e(document).trigger("fscreenchange",[this.isFullScreen(),this._fullScreenElement])},_saveAndApplyStyles:function(){var t=e(this._fullScreenElement);for(var o in this.__savedStyles={},this.__options.styles)this.__savedStyles[o]=this._fullScreenElement.style[o],this._fullScreenElement.style[o]=this.__options.styles[o];this.__options.toggleClass&&t.addClass(this.__options.toggleClass)},_revertStyles:function(){var t=e(this._fullScreenElement);for(var o in this.__options.styles)this._fullScreenElement.style[o]=this.__savedStyles[o];this.__options.toggleClass&&t.removeClass(this.__options.toggleClass)},open:function(t,o){t!==this._fullScreenElement&&(this.isFullScreen()&&this.exit(),this._fullScreenElement=t,this.__options=e.extend(!0,{},this._DEFAULT_OPTIONS,o),this._saveAndApplyStyles())},exit:null,isFullScreen:null,isNativelySupported:function(){return l}};var h=function(){h._super.constructor.apply(this,arguments),this.exit=e.proxy(s("exitFullscreen"),document),this._DEFAULT_OPTIONS=e.extend(!0,{},this._DEFAULT_OPTIONS,{styles:{width:"100%",height:"100%"}}),e(document).bind(this._prefixedString("fullscreenchange"),e.proxy(this._fullScreenChange,this)).bind(this._prefixedString("fullscreenerror"),e.proxy(this._fullScreenError,this))};o(h,m,{VENDOR_PREFIXES:["","o","ms","moz","webkit"],_prefixedString:function(t){return e.map(this.VENDOR_PREFIXES,function(e){return e+t}).join(" ")},open:function(e,t){h._super.open.apply(this,arguments),s(e,"requestFullscreen").call(e)},exit:e.noop,isFullScreen:function(){return null!==s("fullscreenElement")},element:function(){return s("fullscreenElement")}});var u=function(){u._super.constructor.apply(this,arguments),this._DEFAULT_OPTIONS=e.extend({},this._DEFAULT_OPTIONS,{styles:{position:"fixed",zIndex:"2147483647",left:0,top:0,bottom:0,right:0}}),this.__delegateKeydownHandler()};o(u,m,{__isFullScreen:!1,__delegateKeydownHandler:function(){var t=e(document);t.delegate("*","keydown.fullscreen",e.proxy(this.__keydownHandler,this));var o=c?t.data("events"):e._data(document).events,i=o.keydown;c?o.live.unshift(o.live.pop()):i.splice(0,0,i.splice(i.delegateCount-1,1)[0])},__keydownHandler:function(e){return!this.isFullScreen()||27!==e.which||(this.exit(),!1)},_revertStyles:function(){u._super._revertStyles.apply(this,arguments),this._fullScreenElement.offsetHeight},open:function(e){u._super.open.apply(this,arguments),this.__isFullScreen=!0,this._fullScreenChange()},exit:function(){this.__isFullScreen=!1,this._fullScreenChange()},isFullScreen:function(){return this.__isFullScreen},element:function(){return this.__isFullScreen?this._fullScreenElement:null}}),e.fullscreen=l?new h:new u,e.fn.fullscreen=function(t){var o=this[0];return(t=e.extend({toggleClass:null,overflow:"hidden"},t)).styles={overflow:t.overflow},delete t.overflow,o&&e.fullscreen.open(o,t),this}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){var t,o,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var s=i.length;s;)e.event.fixHooks[i[--s]]=e.event.mouseHooks;function n(i){var a,s,n,r=i||window.event,l=[].slice.call(arguments,1),d=0,c=0,m=0;return(i=e.event.fix(r)).type="mousewheel",r.wheelDelta&&(d=r.wheelDelta),r.detail&&(d=-1*r.detail),m=d,void 0!==r.axis&&r.axis===r.HORIZONTAL_AXIS&&(m=0,c=-1*d),r.deltaY&&(d=m=-1*r.deltaY),r.deltaX&&(d=-1*(c=r.deltaX)),void 0!==r.wheelDeltaY&&(m=r.wheelDeltaY),void 0!==r.wheelDeltaX&&(c=-1*r.wheelDeltaX),a=Math.abs(d),(!t||a<t)&&(t=a),s=Math.max(Math.abs(m),Math.abs(c)),(!o||s<o)&&(o=s),n=d>0?"floor":"ceil",d=Math[n](d/t),c=Math[n](c/o),m=Math[n](m/o),l.unshift(i,d,c,m),(e.event.dispatch||e.event.handle).apply(this,l)}e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=a.length;e;)this.addEventListener(a[--e],n,!1);else this.onmousewheel=n},teardown:function(){if(this.removeEventListener)for(var e=a.length;e;)this.removeEventListener(a[--e],n,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(e,t){this.defaults.type=e,this.defaults.name=t},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);settings.single.length||(settings.single="metadata");var data=$.data(elem,settings.single);if(data)return data;if(data="{}","class"==settings.type){var m=settings.cre.exec(elem.className);m&&(data=m[1])}else if("elem"==settings.type){if(!elem.getElementsByTagName)return;var e=elem.getElementsByTagName(settings.name);e.length&&(data=$.trim(e[0].innerHTML))}else if(null!=elem.getAttribute){var attr=elem.getAttribute(settings.name);attr&&(data=attr)}return data.indexOf("{")<0&&(data="{"+data+"}"),data=eval("("+data+")"),$.data(elem,settings.single,data),data}}}),$.fn.metadata=function(e){return $.metadata.get(this[0],e)}}(jQuery),function($){var methods={init:function(options){var set=$.extend({trendCorrect:0,formButtons:"20px 5px",colorButtons:"#000",sensitivity:12,rotationModeEnabled:!0,useAlternativeRotation:"",loaderObj:"",ColorLoader:"#ff7700",loader:!1,CANVAS:!0,imageArray:[],tmpArr:[],tmpArr2:[],img:{},imageJqObj:"",imageObj:"",imageId:"",wrapObj:"",imgDopJqObj:"",imgFlag:1,imgWidth:0,imgHeight:0,flagImg2:!0,memPageX:0,memPageY:0,startTime:0,startPageX:0,keyDown:!1,frames:"",rows:"",imagePath:"",imageName:"",maxZoom:"",imageLow:"",imageHigh:"",imagesType:"jpg",sprite:!0,imageCols:0,imageRows:0,imageFrames:0,frame:1,row:1,imgNum:0,toRotate:1,posRotate:1,autoPlay:!1,zoomFlag:!1,minIntervalRotate:"",intervalRotate:"",intervalID:0,loadErrorTime:0,imgOffsetX1:0,imgOffsetY1:0,imgOffsetX2:0,imgOffsetY2:0,imgX1:0,imgY1:0,imgX2:0,imgY2:0,canvasObj:"",canvasContext:"",canOffX:0,canOffY:0,canWidth:0,canHeight:0,zoom:10,zoomStep:0,radiusArr:["5px","10px","20px","30px","5px 20px","20px 5px"],radiusN:0,colorArr:["a00","0a0","00a","aa0","a0a","0aa","000"],colorN:0,PANELS:[[["horizon","bottom","center"],["3d","backward","stop","forward","expand"],"main-control-panel"],[["vertical","top","right"],["plus","minus","scissors","paint-format"]]],buttonsKit:1,autoDisableRotationalMode:"",BUTTONS:{1:{expand:["e60c","fullscreen","Fullscreen"],contract:["e60d","fullscreen","Exit fullscreen"],backward:["e615","backwardRotate","Backward"],forward:["e61a","forwardRotate","Forward"],play:["e60b","","Play"],stop:["e60a","stopRotate","Stop"],minus:["e603","minusSize","Minus"],plus:["e604","plusSize","Plus"],up:["e616","rowUp","Up"],down:["e619","rowDown","Down"],scissors:["e617","radiusKey","Radius"],"paint-format":["e600","colorKey","Color"],"3d":["e613","move3d","<- 360 ->"],move:["e612","move3d","<- move ->"]},2:{expand:["e60e","fullscreen","Fullscreen"],contract:["e60f","fullscreen","Exit fullscreen"],backward:["e605","backwardRotate","Backward"],forward:["e608","forwardRotate","Forward"],play:["e601","","Play"],stop:["e602","stopRotate","Stop"],minus:["e611","minusSize","Minus"],plus:["e610","plusSize","Plus"],up:["e606","rowUp","Up"],down:["e607","rowDown","Down"],scissors:["e609","radiusKey","Radius"],"paint-format":["e618","colorKey","Color"],"3d":["e613","move3d","<- 360 ->"],move:["e612","move3d","<- move ->"]}}},options),zoomController=new ZoomController;function start(w,h){set.zoomStep<1&&set.maxZoom>100&&(set.zoomStep=Math.round((set.imgWidth/100*set.maxZoom-set.imgWidth)/set.zoom)),set.intervalRotate=set.minIntervalRotate;var smallClass="";(w<=400||h<=300)&&(smallClass=" small"),set.imageJqObj.wrap('<span id="top-'+set.imageId+'" class="wrapper--top'+smallClass+'"></span>'),$("#top-"+set.imageId).css({width:"100%",height:"100%"}).disableSelection(),set.imageJqObj.wrap('<div id="wrap-'+set.imageId+'" class="wrapper--3d"></div>'),set.wrapObj=$("#wrap-"+set.imageId),set.wrapObj.disableSelection(),set.loaderObj=initCanvasLoader(set.wrapObj),startLoader(),set.imageJqObj.wrap('<canvas id="canvas-'+set.imageId+'" width="'+w+'" height="'+h+'"></canvas>'),set.canvasObj=document.getElementById("canvas-"+set.imageId),set.canvasContext=set.canvasObj.getContext("2d"),set.canvasContext.drawImage(set.imageObj,0,0,w,h);var canJqObj=$(set.canvasObj);canJqObj.css({left:"50%",marginLeft:-.5*set.canvasObj.width+"px",top:"50%",marginTop:-.5*set.canvasObj.height+"px"});var wrapPanel=$('<div class = "wrapper--panel"></div>').appendTo(set.wrapObj);function newPanel(e,t,o){return $('<div class = "icon--panel ip--'+t+(o=""!==o&&null!=o?" "+o:"")+'"></div>').appendTo(e)}function newKey(wrap,type,fun,title){var key=$('<a id="'+fun+"-"+set.imageId+'" title="'+title+'">&#x'+type+";</a>");key.css({background:set.colorButtons,borderRadius:set.formButtons}).on("touchstart mousedown",function(){set.keyDown=!0,key.css({color:"#f70",border:"1px solid #f70"})}).on("mouseup mouseout touchend touchcancel",function(){set.keyDown=!1,key.css({color:"",border:""})}).appendTo(wrap),""!==fun&&key.on("click",{key:key},eval(fun))}for(var p=0;p<set.PANELS.length;p++){var addClass="";set.PANELS[p].length>2&&void 0!==set.PANELS[p][2]&&(addClass=set.PANELS[p][2]);for(var panel=newPanel(wrapPanel,set.PANELS[p][0][0],addClass),bKit=set.buttonsKit,k=0;k<set.PANELS[p][1].length;k++){var properties=set.BUTTONS[bKit][set.PANELS[p][1][k]];void 0!==properties&&""!==properties&&newKey(panel,properties[0],properties[1],properties[2])}for(var i=1;i<set.PANELS[p][0].length;i++)"bottom"===set.PANELS[p][0][i]?panel.css({top:"100%",marginTop:"-"+panel.outerHeight()+"px"}):"center"===set.PANELS[p][0][i]?(aaw=$(".icon--panel a").outerWidth(),plw=panel.outerWidth(),panel.css({left:"50%",marginLeft:-.5*panel.outerWidth()+"px",width:plw})):"right"===set.PANELS[p][0][i]&&panel.css({left:"100%",marginLeft:-1*panel.outerWidth()+"px"})}setChangeModeButtonActive(!1),set.sprite?newImgLoad(1):newImagesLoad(1),set.wrapObj.mousewheel(function(e,t,o,i){set.maxZoom>100&&set.zoomFlag&&0!==t&&zoommer(t),set.maxZoom>100&&set.flagImg2&&t>0&&(set.flagImg2=!1,set.sprite?newImgLoad(2):newImagesLoad(2)),e.stopPropagation(),e.preventDefault()}),set.wrapObj.on("touchstart mousedown",mouseDown),set.wrapObj.on("mouseup touchend touchcancel",mouseUp),new ResizeSensor(set.wrapObj,function(){zoomController.setMinZoom()})}function ZoomController(){this.currentZoom=1,this.initialImgWidth=set.imgWidth,this.initialImgHeight=set.imgHeight,this.initialized=!1,this.initializeZoom=function(){this.setMinZoom(),this.initialized=!0},this.getMaxZoom=function(){return Math.max(set.maxZoom/100,1)},this.getMinZoom=function(){var e=set.wrapObj.width(),t=this.initialImgWidth,o=set.wrapObj.height(),i=this.initialImgHeight;return Math.min(e/t,o/i,1)},this.setZoomWithoutRedraw=function(e){var t=this.getMaxZoom(),o=this.getMinZoom();e>t&&(e=t),e<o&&(e=o);var i=this.initialImgWidth/this.initialImgHeight;set.CANVAS?(set.canWidth=this.initialImgWidth*e,set.canHeight=set.canWidth/i,set.canvasObj.width=set.canWidth,set.canvasObj.height=set.canHeight,set.canvasObj.style.marginLeft=-.5*set.canWidth+"px",set.canvasObj.style.marginTop=-.5*set.canHeight+"px",fitImageToBounds()):(set.imgWidth=this.initialImgWidth*e,set.imgHeight=Math.round(set.imgWidth/i)),this.currentZoom=e},this.setZoom=function(e){(this.setZoomWithoutRedraw(e),set.CANVAS)?(drawImage(position()),offSet0()):newSize();this.currentZoom=e},this.setMinZoom=function(){this.setZoom(this.getMinZoom())},this.setMaxZoom=function(){this.setZoom(this.getMaxZoom())},this.addZoomPixels=function(e){var t=((set.CANVAS?set.canWidth:set.imgWidth)+e)/this.initialImgWidth;this.setZoom(t)}}function move3d(e){var t=$("#move3d-"+set.imageId),o=set.buttonsKit,i=set.BUTTONS[o]["3d"],a=set.BUTTONS[o].move;if(set.rotationModeEnabled){if(!isMoveModeAllowed())return;t.html("&#x"+i[0]+";").attr({title:i[2]}),set.autoPlay&&stopRotate()}else t.html("&#x"+a[0]+";").attr({title:a[2]});set.rotationModeEnabled=!set.rotationModeEnabled}function rotationImg(){moment(),clearInterval(set.intervalID),set.autoPlay&&(set.toRotate?++set.frame:--set.frame,set.intervalID=setTimeout(rotationImg,set.intervalRotate));var e=position();set.sprite?set.CANVAS?drawImage(e):(set.imgFlag?(obj1=set.imageJqObj[0],obj2=set.imgDopJqObj[0],set.imgFlag=0):(obj2=set.imageJqObj[0],obj1=set.imgDopJqObj[0],set.imgFlag=1),obj1.style.display="",obj2.style.display="none",obj1.style.left=e[0],obj1.style.top=e[1]):drawImage(e)}function newImagesLoad(e){if(startLoader(),1===e)var t=set.tmpArr,o=1e4,i=set.imagePath+set.imageName+"100.";else if(2===e)t=set.tmpArr2,o=3e4,i=set.imagePath+set.imageName+set.maxZoom+".";set.loadErrorTime=setTimeout(function(){newImagesLoad(e)},o);var a=0,s=1,n=1;for(n=1;n<=set.rows;n++){t[n]=[];var r=set.frames,l=0;for(s=1;s<=set.frames;s++)t[n][s]=new Image,t[n][s].setAttribute("data-x",s),t[n][s].setAttribute("data-y",n),1===set.rows&&0===set.trendCorrect?t[n][s].src=i+l+++"."+set.imagesType:1===set.rows&&1===set.trendCorrect?t[n][s].src=i+--r+"."+set.imagesType:t[n][s].src=i+--r+"."+(n-1)+"."+set.imagesType,(!ie()||ie()>8)&&("complete"!==t[n][s].readyState&&"loaded"!==t[n][s].readyState||d(),t[n][s].onload=d,t[n][s].onreadystatechange=d)}function d(){1===e?++a==set.frames*set.rows&&(clearTimeout(set.loadErrorTime),set.imageArray=set.tmpArr,setTimeout(function(){set.autoPlay&&rotationImg(),set.zoomFlag=!0,stopLoader(),zoomController.initialized||zoomController.initializeZoom()},100),a=0):2===e&&(n=this.getAttribute("data-y"),s=this.getAttribute("data-x"),++a==set.frames*set.rows&&setTimeout(function(){set.imageArray=set.tmpArr2,set.tmpArr=[],clearTimeout(set.loadErrorTime),stopLoader()},100),setTimeout(function(){imageArray(n,s)},0))}ie()&&ie()<9&&(set.imageArray=t,set.autoPlay&&rotationImg(),set.zoomFlag=!0,stopLoader(),clearTimeout(set.loadErrorTime))}function imageArray(e,t){var o=set.tmpArr2[e][t];void 0!==o&&(set.imageArray[e][t]=o)}function newImgLoad(e){startLoader(),1===e?lnk=set.imageLow:2===e&&(lnk=set.imageHigh);var t=new Image;function o(){0===set.imageCols&&(set.imageCols=Math.round(t.width/set.imgWidth)),0===set.imageRows&&(set.imageRows=Math.round(t.height/set.imgHeight));var e=set.imageCols,o=set.imageRows;set.imageFrames;set.CANVAS?(set.imageObj=t,set.imgWidth=t.width/e,set.imgHeight=t.height/o):(w=set.imgWidth,h=set.imgHeight,iw=w*e,ih=h*o,set.imgDopJqObj[0].src=lnk,set.imgDopJqObj.css({position:"absolute",width:iw+"px",height:ih+"px"}),set.imageJqObj[0].src=lnk,set.imageJqObj.css({position:"absolute",display:"none",width:iw+"px",height:ih+"px"})),newSize(),set.autoPlay&&rotationImg(),set.zoomFlag=!0,setTimeout(stopLoader,100)}t.src=lnk,"complete"!==t.readyState&&"loaded"!==t.readyState||o(),t.onload=o,t.onreadystatechange=o}function mouseDown(e){if(!set.keyDown){if(void 0!==e.originalEvent.touches||void 0!==e.originalEvent.changedTouches)var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];var o=e.pageX||t.pageX,i=e.pageY||t.pageY;set.rotationModeEnabled?(set.wrapObj.on("mousemove touchmove",mouseMove),stopRotate(),set.startTime=new Date,set.startPageX=o,set.memPageX=o,set.memPageY=i,e.stopPropagation(),e.preventDefault()):(set.memPageX=o,set.memPageY=i,set.wrapObj.on("mousemove touchmove",mouseMove2))}}function moment(){var e=0;if(set.intervalRotate<set.minIntervalRotate){var t=set.intervalRotate/set.minIntervalRotate*100;t<25?e=.25:t>25&&t<50?e=.5:t>50&&t<75?e=.75:t>75&&(e=1),set.intervalRotate=set.intervalRotate+e}else set.intervalRotate>set.minIntervalRotate&&(set.intervalRotate=set.minIntervalRotate)}function mouseUp(){if(set.wrapObj.unbind("mousemove touchmove",mouseMove2),set.wrapObj.unbind("mousemove touchmove",mouseMove),set.rotationModeEnabled){var e=new Date-set.startTime,t=0;set.memPageX>set.startPageX?t=(set.memPageX-set.startPageX)/10:set.memPageX<set.startPageX&&(t=(set.startPageX-set.memPageX)/10),t>set.sensitivity&&(set.intervalRotate=e/t,set.autoPlay||(set.autoPlay=!0,rotationImg()))}}function mouseMove(e){if(void 0!==e.originalEvent.touches||void 0!==e.originalEvent.changedTouches)var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];var o=e.pageX||t.pageX,i=e.pageY||t.pageY,a=10*(1+zoomController.currentZoom/15),s=function(){++set.frame,set.toRotate=1,rotationImg(),set.memPageX=o},n=function(){--set.frame,set.toRotate=0,rotationImg(),set.memPageX=o};o-set.memPageX>a?set.useAlternativeRotation?n():s():set.memPageX-o>a&&(set.useAlternativeRotation?s():n()),i-set.memPageY>a?(rowDown(),set.memPageY=i):set.memPageY-i>a&&(rowUp(),set.memPageY=i),e.stopPropagation(),e.preventDefault()}function mouseMove2(e){if(void 0!==e.originalEvent.touches||void 0!==e.originalEvent.changedTouches)var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];var o=e.pageX||t.pageX,i=e.pageY||t.pageY,a=o-set.memPageX,s=i-set.memPageY;set.canOffX+=1*a,set.canOffY+=1*s,fitImageToBounds(),set.memPageX=o,set.memPageY=i,drawImage(position())}function fitImageToBounds(){var e=$("#canvas-"+set.imageId),t=set.wrapObj,o=e.width(),i=e.height(),a=t.width(),s=t.height(),n=Math.max((o-a)/2,0),r=Math.max((i-s)/2,0);set.canOffX<-n&&(set.canOffX=-n),set.canOffX>n&&(set.canOffX=n),set.canOffY<-r&&(set.canOffY=-r),set.canOffY>r&&(set.canOffY=r)}function offSet0(){isMoveModeAllowed()?(setChangeModeButtonActive(!0),set.autoDisableRotationalMode&&set.rotationModeEnabled&&move3d()):(set.canOffX=0,set.canOffY=0,drawImage(position()),setChangeModeButtonActive(!1),set.rotationModeEnabled=!1,move3d())}function setChangeModeButtonActive(e){e?$("#move3d-"+set.imageId).removeAttr("class"):$("#move3d-"+set.imageId).attr("class","not--active")}function isMoveModeAllowed(){var e=$("#canvas-"+set.imageId),t=e.width(),o=e.height(),i=set.wrapObj.width(),a=set.wrapObj.height();return t>i||o>a}function rowUp(){--set.row,set.row>set.rows?set.row=set.rows:set.row<1&&(set.row=1),drawImage(position())}function rowDown(){++set.row,set.row>set.rows?set.row=set.rows:set.row<1&&(set.row=1),drawImage(position())}function startRotate(){set.autoPlay||(set.rotationModeEnabled||move3d(),set.autoPlay=!0,rotationImg())}function stopRotate(){set.intervalRotate=set.minIntervalRotate,set.memPageX=set.startPageX,set.autoPlay&&(clearInterval(set.intervalID),set.intervalID=0,set.autoPlay=!1)}function forwardRotate(e){set.autoDisableRotationalMode&&!set.rotationModeEnabled&&zoomController.setMinZoom(),set.toRotate=1,startRotate()}function backwardRotate(e){set.autoDisableRotationalMode&&!set.rotationModeEnabled&&zoomController.setMinZoom(),set.toRotate=0,startRotate()}function plusSize(){set.zoomFlag&&zoommer(1),set.flagImg2&&(set.flagImg2=!1,set.sprite?newImgLoad(2):newImagesLoad(2))}function minusSize(){set.zoomFlag&&zoommer(-1)}function position(){return set.sprite?(set.frame>set.imageFrames?set.frame=1:set.frame<1&&(set.frame=set.imageFrames),set.imageArray[set.frame-1]):(set.frame>set.frames?set.frame=1:set.frame<1&&(set.frame=set.frames),set.imageArray[set.row][set.frame])}function drawImage(e){var t=set.imgWidth,o=set.imgHeight;set.sprite?set.canvasContext.drawImage(set.imageObj,e[0],e[1],t,o,set.canOffX,set.canOffY,set.canWidth,set.canHeight):set.CANVAS?set.canvasContext.drawImage(e,0,0,e.width,e.height,set.canOffX,set.canOffY,set.canWidth,set.canHeight):void 0!==e&&(set.imageJqObj[0].src=e.src,set.imageJqObj.css({display:"block",position:"absolute",left:0,top:0,width:t+"px",height:o+"px"}))}function zoommer(e){var t=set.zoomStep;e>0?zoomController.addZoomPixels(t):zoomController.addZoomPixels(-t)}function zoommerFullScreen(e){setChangeModeButtonActive(!1),set.rotationModeEnabled=!1,move3d(),set.flagImg2&&e>0&&(set.flagImg2=!1,set.sprite?newImgLoad(2):newImagesLoad(2)),zoomController.setMinZoom(),setTimeout(nifs,100)}function nifs(){set.loader?setTimeout(nifs,100):set.CANVAS?drawImage(position()):newSize()}function newSize(){var e=set.imgWidth,t=set.imgHeight;if(set.sprite){for(var o=set.imageCols,i=set.imageRows,a=set.imageFrames,s=e*o,n=t*i,r=[],l=0,d=0;d<i;d++)for(var c=0;c<o&&(set.CANVAS?(pw=c*e,ph=d*t):(pw=c*e*-1+"px",ph=d*t*-1+"px"),r[l]=[pw,ph],++l!==a);c++);set.imageArray=r;var m=position();set.CANVAS?drawImage(m):(obj=set.imgDopJqObj[0],obj.style.width=s+"px",obj.style.height=n+"px",obj.style.left=m[0],obj.style.top=m[1],obj=set.imageJqObj[0],obj.style.width=s+"px",obj.style.height=n+"px",obj.style.left=m[0],obj.style.top=m[1],$("#hidden-"+set.imageId).css({width:e+"px",height:t+"px",left:"50%",marginLeft:-.5*e+"px",top:"50%",marginTop:-.5*t+"px"}))}else set.imageJqObj.css({display:"block",position:"absolute",left:0,top:0,width:e+"px",height:t+"px"}),$("#hidden-"+set.imageId).css({width:e+"px",height:t+"px",left:"50%",marginLeft:-.5*e+"px",top:"50%",marginTop:-.5*t+"px"})}function radiusKey(e){$(".icon--panel a").css({borderRadius:set.radiusArr[set.radiusN]}),++set.radiusN>5&&(set.radiusN=0)}function colorKey(e){$(".icon--panel a").css({background:"#"+set.colorArr[set.colorN]}),++set.colorN>6&&(set.colorN=0)}function fullscreen(e){if(set.zoomFlag){var t=e.data.key;if(set.canOffX=0,set.canOffY=0,ie()>7||!ie()){var o=set.buttonsKit,i=set.BUTTONS[o].expand,a=set.BUTTONS[o].contract,s=set.wrapObj;$.fullscreen.isFullScreen()?(ie()&&t.html("&#x"+i[0]+";").attr({title:i[2]}),$.fullscreen.exit(),zoommerFullScreen(-1),device.ios()&&$(".main-control-panel",$(s)).removeClass("ios-top")):(ie()&&t.html("&#x"+a[0]+";").attr({title:a[2]}),s.fullscreen(),zoommerFullScreen(1),device.ios()&&$(".main-control-panel",$(s)).addClass("ios-top")),$(document).on("fscreenchange",function(e,o,s){$.fullscreen.isFullScreen()?t.html("&#x"+a[0]+";").attr({title:a[2]}):(t.html("&#x"+i[0]+";").attr({title:i[2]}),zoommerFullScreen(-1))}),ie()&&$(window).keydown(function(e){(e.keyCode=27)&&(t.html("&#x"+i[0]+";").attr({title:i[2]}),zoommerFullScreen(-1))})}else alert("You have deprecated version of Internet Explorer browser. Full screen mode is not supported.")}}function initCanvasLoader(e){var t=$("<div/>",{}).css({position:"absolute",left:"50%",top:"50%"}).appendTo(e),o=new CanvasLoader(t[0]);o.setColor(set.ColorLoader),o.setShape("roundRect"),o.setDiameter(100),o.setDensity(10),o.setRange(1),o.setSpeed(1),o.setFPS(10);var i=-.5*o.getDiameter()+"px";return $(".canvasLoader").css("margin",i+" 0 0 "+i),o}function startLoader(){set.loader=!0,set.loaderObj.show()}function stopLoader(){set.loaderObj.hide(),set.loader=!1}function ie(){var e=navigator.userAgent,t=e.indexOf("MSIE");if(-1===t&&(t=e.indexOf("Trident")),-1!==t){var o=e.substr(t+5,2);return parseInt(o)?res=parseInt(o):res=100,res}return!1}start(set.imgWidth,set.imgHeight)}};$.fn.Photo3D=function(e){return methods[e]?methods[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Метод с именем "+e+" не существует для jQuery.Photo3D"):methods.init.apply(this,arguments)}}(jQuery),jQuery(document).ready(function(){jQuery(".photo3d-preview-image").each(function(){jQuery(this).prop("complete")?jQuery(this).Photo3Dconfig():jQuery(this).load(function(){jQuery(this).Photo3Dconfig()})})}),function(e){var t={init:function(e){this.each(function(){void 0===jQuery(this).metadata().startImmediately||jQuery(this).metadata().startImmediately?t.show3d(this):t.click3d(this)})},show3d:function(e){var t=jQuery(e),o=e.width,i=e.height,a=!0,s=0,n=0,r="",l="",d=0,c=1,m=!0,h=100,u=(p=jQuery(e).attr("src").replace("","").replace(".jpg",""))+".3d/",f=p.split("/"),p=f[f.length-1],g=1,v=1,w=10,b=0,y=1,S="20px 5px",x="#000",I=12,C=0,O=0,j=0,R=0,_=0,P=0,A="",M=!1,z=100;""==e.id&&(e.id="id"+(new Date).getTime()),void 0!==t.metadata().frames&&(d=t.metadata().frames),void 0!==t.metadata().yframes&&(c=t.metadata().yframes),void 0!==t.metadata().autoPlay&&(m=t.metadata().autoPlay),void 0!==t.metadata().maxZoom&&(h=t.metadata().maxZoom),void 0!==t.metadata().useSeparateFrames&&t.metadata().useSeparateFrames&&(a=!1),a&&(void 0!==t.metadata().spriteCols&&void 0!==t.metadata().spriteRows&&(s=t.metadata().spriteCols,n=t.metadata().spriteRows),r=""+u+p+".3d.100.jpg",l=""+u+p+".3d."+h+".jpg"),void 0!==t.metadata().buttonsKit&&(g=t.metadata().buttonsKit),void 0!==t.metadata().toRotate&&(v=t.metadata().toRotate),void 0!==t.metadata().zoom&&(w=t.metadata().zoom),void 0!==t.metadata().zoomIncrement&&(b=t.metadata().zoomIncrement),void 0!==t.metadata().trendCorrect&&(y=t.metadata().trendCorrect),void 0!==t.metadata().formButtons&&(S=t.metadata().formButtons),void 0!==t.metadata().colorButtons&&(x=t.metadata().colorButtons),void 0!==t.metadata().sensitivity&&(I=t.metadata().sensitivity),void 0!==t.metadata().firstFrameX&&(C=t.metadata().firstFrameX),void 0!==t.metadata().firstFrameY&&(O=t.metadata().firstFrameY),void 0!==t.metadata().horizontalRangeLeft&&(j=t.metadata().horizontalRangeLeft),void 0!==t.metadata().horizontalRangeRight&&(R=t.metadata().horizontalRangeRight),void 0!==t.metadata().verticalRangeBottom&&(_=t.metadata().verticalRangeBottom),void 0!==t.metadata().verticalRangeTop&&(P=t.metadata().verticalRangeTop),void 0!==t.metadata().productCode&&(A=t.metadata().productCode),void 0!==t.metadata().useAlternativeRotation&&(M=t.metadata().useAlternativeRotation),void 0!==t.metadata().minIntervalRotate&&(z=t.metadata().minIntervalRotate);var E="";h>100&&(E="move");var T=[[["horizon","bottom","center"],["backward","stop","forward","expand",E],"main-control-panel"]];if(h>100){var k=[[["vertical","top","left"],["plus","minus"]]];jQuery.merge(T,k)}if(!a&&c>1){k=[[["vertical","top","right"],["up","down"]]];jQuery.merge(T,k)}t.Photo3D({buttonsKit:g,PANELS:T,imageObj:e,imageJqObj:t,imageId:e.id,imgWidth:o,imgHeight:i,sprite:a,frames:d,rows:c,imagePath:""+u,imageName:p+".3d.",maxZoom:h,imageLow:r,imageHigh:l,imageCols:s,imageRows:n,imageFrames:d,toRotate:v,autoPlay:m,zoom:w,zoomStep:b,trendCorrect:y,formButtons:S,colorButtons:x,sensitivity:I,frame:y?d-C:C+1,row:O+1,horizontalRangeLeft:j,horizontalRangeRight:R,verticalRangeBottom:_,verticalRangeTop:P,productCode:A,useAlternativeRotation:M,minIntervalRotate:z,autoDisableRotationalMode:!0})},click3d:function(e){var o=jQuery(e),i=e.width+"px",a=e.height+"px";o.wrap('<span id="sw'+e.id+'" style="max-width:'+i+";max-height:"+a+';display:block;position:relative;cursor:pointer;margin-left:auto;margin-right:auto;"></span>'),o.before('<span id="text'+e.id+'" style="position:absolute;margin:20px;">Click here to load 3D-image...</span>'),o.on("click",function(o){t.load3d(e)}),jQuery("#text"+e.id).on("click",function(o){t.load3d(e)})},load3d:function(e){var o=jQuery(e);jQuery("#text"+e.id).remove(),o.unwrap(),o.unbind(),t.show3d(e),event.stopPropagation(),event.preventDefault()}};e.fn.Photo3Dconfig=function(o){return t[o]?t[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void e.error("Метод с именем "+o+" не существует для jQuery.Photo3Dconfig"):t.init.apply(this,arguments)}}(jQuery),function(){var e,t,o,i,a,s,n,r,l;e=window.device,window.device={},o=window.document.documentElement,l=window.navigator.userAgent.toLowerCase(),device.ios=function(){return device.iphone()||device.ipod()||device.ipad()},device.iphone=function(){return i("iphone")},device.ipod=function(){return i("ipod")},device.ipad=function(){return i("ipad")},device.android=function(){return i("android")},device.androidPhone=function(){return device.android()&&i("mobile")},device.androidTablet=function(){return device.android()&&!i("mobile")},device.blackberry=function(){return i("blackberry")||i("bb10")||i("rim")},device.blackberryPhone=function(){return device.blackberry()&&!i("tablet")},device.blackberryTablet=function(){return device.blackberry()&&i("tablet")},device.windows=function(){return i("windows")},device.windowsPhone=function(){return device.windows()&&i("phone")},device.windowsTablet=function(){return device.windows()&&i("touch")},device.fxos=function(){return(i("(mobile;")||i("(tablet;"))&&i("; rv:")},device.fxosPhone=function(){return device.fxos()&&i("mobile")},device.fxosTablet=function(){return device.fxos()&&i("tablet")},device.meego=function(){return i("meego")},device.mobile=function(){return device.androidPhone()||device.iphone()||device.ipod()||device.windowsPhone()||device.blackberryPhone()||device.fxosPhone()||device.meego()},device.tablet=function(){return device.ipad()||device.androidTablet()||device.blackberryTablet()||device.windowsTablet()||device.fxosTablet()},device.portrait=function(){return 90!==Math.abs(window.orientation)},device.landscape=function(){return 90===Math.abs(window.orientation)},device.noConflict=function(){return window.device=e,this},i=function(e){return-1!==l.indexOf(e)},s=function(e){var t;return t=new RegExp(e,"i"),o.className.match(t)},t=function(e){return s(e)?void 0:o.className+=" "+e},r=function(e){return s(e)?o.className=o.className.replace(e,""):void 0},device.ios()?device.ipad()?t("ios ipad tablet"):device.iphone()?t("ios iphone mobile"):device.ipod()&&t("ios ipod mobile"):device.android()?device.androidTablet()?t("android tablet"):t("android mobile"):device.blackberry()?device.blackberryTablet()?t("blackberry tablet"):t("blackberry mobile"):device.windows()?device.windowsTablet()?t("windows tablet"):device.windowsPhone()?t("windows mobile"):t("desktop"):device.fxos()?device.fxosTablet()?t("fxos tablet"):t("fxos mobile"):device.meego()?t("meego mobile"):t("desktop"),a=function(){return device.landscape()?(r("portrait"),t("landscape")):(r("landscape"),t("portrait"))},n="onorientationchange"in window?"orientationchange":"resize",window.addEventListener?window.addEventListener(n,a,!1):window.attachEvent?window.attachEvent(n,a):window[n]=a,a()}.call(this),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.ResizeSensor=t()}("undefined"!=typeof window?window:this,function(){if("undefined"==typeof window)return null;var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};function t(e,t){var o=Object.prototype.toString.call(e),i="[object Array]"===o||"[object NodeList]"===o||"[object HTMLCollection]"===o||"[object Object]"===o||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,a=0,s=e.length;if(i)for(;a<s;a++)t(e[a]);else t(e)}function o(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}var i=function(a,s){t(a,function(t){!function(t,i){if(t)if(t.resizedAttached)t.resizedAttached.add(i);else{t.resizedAttached=new function(){var e,t,o=[];this.add=function(e){o.push(e)},this.call=function(){for(e=0,t=o.length;e<t;e++)o[e].call()},this.remove=function(i){var a=[];for(e=0,t=o.length;e<t;e++)o[e]!==i&&a.push(o[e]);o=a},this.length=function(){return o.length}},t.resizedAttached.add(i),t.resizeSensor=document.createElement("div"),t.resizeSensor.dir="ltr",t.resizeSensor.className="resize-sensor";var a="position: absolute; left: -10px; top: -10px; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",s="position: absolute; left: 0; top: 0; transition: 0s;";t.resizeSensor.style.cssText=a,t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+a+'"><div style="'+s+'"></div></div><div class="resize-sensor-shrink" style="'+a+'"><div style="'+s+' width: 200%; height: 200%"></div></div>',t.appendChild(t.resizeSensor);var n=window.getComputedStyle(t).getPropertyValue("position");"absolute"!==n&&"relative"!==n&&"fixed"!==n&&(t.style.position="relative");var r,l,d=t.resizeSensor.childNodes[0],c=d.childNodes[0],m=t.resizeSensor.childNodes[1],h=o(t),u=h.width,f=h.height,p=function(){var e=0===t.offsetWidth&&0===t.offsetHeight;if(e){var o=t.style.display;t.style.display="block"}c.style.width="100000px",c.style.height="100000px",d.scrollLeft=1e5,d.scrollTop=1e5,m.scrollLeft=1e5,m.scrollTop=1e5,e&&(t.style.display=o)};t.resizeSensor.resetSensor=p;var g=function(){l=0,r&&(u=void 0,f=void 0,t.resizedAttached&&t.resizedAttached.call())},v=function(){var i=o(t),a=i.width,s=i.height;(r=a!=u||s!=f)&&!l&&(l=e(g)),p()},w=function(e,t,o){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener(t,o)};w(d,"scroll",v),w(m,"scroll",v),e(p)}}(t,s)}),this.detach=function(e){i.detach(a,e)},this.reset=function(){a.resizeSensor.resetSensor()}};return i.reset=function(e,o){t(e,function(e){e.resizeSensor.resetSensor()})},i.detach=function(e,o){t(e,function(e){e&&(e.resizedAttached&&"function"==typeof o&&(e.resizedAttached.remove(o),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))})},i});